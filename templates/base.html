<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>QueueMe</title>
    <link rel="stylesheet" type="text/css" href="/static/theme.css">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular-route.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular-strap/2.1.2/angular-strap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular-strap/2.1.2/angular-strap.tpl.min.js"></script>
    <!--<script type="text/javascript" src="/static/js/ui-bootstrap-tpls-0.12.1.min.js"></script>-->
    <script type="text/javascript" src="/static/js/app.js"></script>
</head>

<body ng-app="app">
{%- block topbar -%}
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <h2>
                <a href="/#/" class="brand">QueueMe
                </a>
            </h2>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">

            <ul class="nav navbar-nav navbar-right">
                <li><span data-toggle="modal" data-target="#myModal" class="navbar-text">
                    New Room</span></li>
                {% if current_user.is_authenticated() %}
                    <li>
                        <span class="navbar-text">
                            Logged in as <span class='navbar-email'>{{ current_user.email }}</span>
                        </span>
                    </li>
                    <li><a href="/logout">Logout</a></li>
                {% elif request.path != "/login" %}
                    <li><a href="/login">Login</a></li>
                {% endif %}
            </ul>

        </div>
        <div class="navbar-collapse">
        </div>
    </div>
</nav>
{%- endblock -%}

<div class="container">
    <div class="content">
        {% block content %}
            <div ng-view></div>
        {% endblock %}
    </div>
</div>
{% block js_footer %}{% endblock %}
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" ng-controller="NewRoomController as newRoom">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">New Room</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="roomName">Room Name</label>
                    <input ng-model='newroom.name'type="text" class="form-control" id="roomName" placeholder="Enter Room Name">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" ng-click="submit(newroom)">Create</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="createQueueModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" ng-controller="NewQueueController as newQueue">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">New Queue</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="queueName">Queue Name</label>
                    <input ng-model='newqueue.name'type="text" class="form-control" id="queueName" placeholder="Enter Queue Name">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" ng-click="submit(newqueue)" data-dismiss="modal">Create</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editQueueModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" ng-controller="EditQueueController as EditQueueController">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Edit Queue</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="queueName">Queue Name</label>
                    <input ng-model='editingQueue.name'type="text" class="form-control" id="queueName" placeholder="Enter Queue Name" >
                </div>
                <hr>
                <h4>Resources</h4>
                <table class="table">
                    <thead>
                        <tr>
                            <th>
                                Resource
                            </th>
                            <!--<th>-->
                                <!--Active-->
                            <!--</th>-->
                            <th>

                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="resource in editingQueue.resources">
                            <td><input ng-model='resource.name'type="text" class="form-control" placeholder="Enter Resource Name" ></td>
                            <!--<td><input type="checkbox"></td>-->
                            <td><button ng-show="!resource.isNew"type="button" class="pull-left btn btn-danger" ng-click="deleteResource(resource._id)" >Delete</button></td>

                        </tr>
                        <tr>
                            <td><button type="button" class="pull-left btn " ng-click="newResource()" >Add Resource</button></td>
                        </tr>

                    </tbody>

                </table>


            </div>
            <div class="modal-footer">
                <button type="button" class="pull-left btn btn-danger" ng-click="delete(editingQueue)"data-dismiss="modal">Delete Queue</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" ng-click="submit(editingQueue)" data-dismiss="modal">Save</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="editRoomModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" ng-controller="EditRoomController">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Edit Room</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="queueName">Room Name</label>
                    <input ng-model='editingRoom.name'type="text" class="form-control" id="roomName" placeholder="Enter Room Name" >
                    <input type="checkbox" ng-model="editingRoom.is_public">Make Public
                </div>
                <hr>
                <h4>Members</h4>
                <table class="table">
                    <thead>
                    <tr>
                        <th>
                            Member Email
                        </th>
                        <!--<th>-->
                        <!--Active-->
                        <!--</th>-->
                        <th>

                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="member in editingRoom.members">
                        <td>[[member.email]]</td>
                        <!--<td><input type="checkbox"></td>-->
                        <td><button ng-show="!member.isNew"type="button" class="pull-left btn btn-danger" ng-click="deleteMember(member._id)" >Remove</button></td>

                    </tr>
                    <tr ng-repeat="member in editingRoom.newMembers">
                        <td><input ng-model='member.email'type="text" class="form-control" placeholder="Enter Member Email" ></td>
                    </tr>
                    <tr>
                        <td><button type="button" class="pull-left btn " ng-click="newMember()" >Add Member</button></td>
                    </tr>

                    </tbody>

                </table>


            </div>
            <div class="modal-footer">
                <button type="button" class="pull-left btn btn-danger" ng-click="delete(editingRoom)"data-dismiss="modal">Delete Room</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" ng-click="submit(editingRoom)" data-dismiss="modal">Save</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>